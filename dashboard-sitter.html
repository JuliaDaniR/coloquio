<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Panel del Profesional</title>
    <link rel="stylesheet" href="./css/sitter.css" />
  </head>

  <body>
    <header class="topbar">
      <div class="title-group">
        <h1>🐾 Panel del Profesional</h1>

        <p class="welcome-text">
          <span id="sitterAvatar" class="avatar circle">?</span>
          Hola, <span id="sitterName">Usuario</span> 👋
          <span id="verifyStatus" class="badge">...</span>
        </p>
      </div>

      <div class="right-side">
        <!-- 🌙/☀️ Theme Switch -->
        <label class="theme-toggle">
          <input type="checkbox" id="themeToggle" />
          <span class="toggle-label"></span>
        </label>

        <button onclick="logout()" class="btn-logout">⏻</button>
      </div>
    </header>

    <!-- ✅ Reservas -->
    <section class="section-card">
      <h2>📅 Mis Reservas</h2>
      <table id="appointmentsTable">
        <thead>
          <tr>
            <th>Mascota</th>
            <th>Dueño</th>
            <th>Fecha</th>
            <th>Estado</th>
            <th>Acción</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- ✅ Horarios -->
    <section class="section-card">
      <h2>⏱ Mi disponibilidad</h2>

      <div class="horarios-form">
        <select id="diaSemana">
          <option value="LUN">Lunes</option>
          <option value="MAR">Martes</option>
          <option value="MIE">Miércoles</option>
          <option value="JUE">Jueves</option>
          <option value="VIE">Viernes</option>
          <option value="SAB">Sábado</option>
          <option value="DOM">Domingo</option>
        </select>

        <input type="time" id="horaInicio" />
        <input type="time" id="horaFin" />

        <button id="btnAddHorario">➕ Agregar</button>
      </div>

      <table id="horariosTable">
        <thead>
          <tr>
            <th>Día</th>
            <th>Inicio</th>
            <th>Fin</th>
            <th>Activo</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
    <!-- ✅ MODAL EDITAR HORARIO -->
    <div id="modalHorario" class="modal hidden">
      <div class="modal-content small">
        <h3>Editar Horario</h3>

        <label>Día:</label>
        <select id="editDiaSemana">
          <option value="LUN">Lunes</option>
          <option value="MAR">Martes</option>
          <option value="MIE">Miércoles</option>
          <option value="JUE">Jueves</option>
          <option value="VIE">Viernes</option>
          <option value="SAB">Sábado</option>
          <option value="DOM">Domingo</option>
        </select>

        <label>Inicio:</label>
        <input type="time" id="editHoraInicio" />

        <label>Fin:</label>
        <input type="time" id="editHoraFin" />

        <div class="modal-actions">
          <button id="btnGuardarHorario">Guardar ✅</button>
          <button id="btnCerrarModal">Cancelar</button>
        </div>
      </div>
    </div>

    <!-- ✅ Reseñas -->
    <section class="section-card">
      <h2>⭐ Mis Reseñas</h2>
      <ul id="reseñasList" class="review-list"></ul>
    </section>

    <!-- ✅ Perfil -->
    <section class="section-card">
      <h2>⚙️ Mi Perfil</h2>
      <button id="openProfileModal" class="btn-edit">Editar Perfil</button>
    </section>

    <!-- ✅ MODAL PERFIL -->
    <div id="profileModal" class="modal hidden">
      <div class="modal-content">
        <h3>Editar Perfil</h3>

        <div class="avatar-preview-container">
          <img
            id="editMyAvatarPreview"
            class="avatar-preview hidden"
            src=""
            alt="Avatar"
          />
        </div>

        <form
          id="editProfileForm"
          class="form-grid"
          enctype="multipart/form-data"
        >
          <label>📸 Foto de perfil:</label>
          <input type="file" id="editMyFoto" name="foto" accept="image/*" />

          <label>👤 Nombre completo:</label>
          <input type="text" id="editMyNombre" required />

          <label>📧 Email:</label>
          <input type="email" id="editMyEmail" required />

          <label>📍 Dirección:</label>
          <input type="text" id="editMyDireccion" />

          <label>Especialidad:</label>
          <select id="editMyEspecialidad" name="rol_profesional">
            <option value="PASEADOR">Paseador</option>
            <option value="VETERINARIO">Veterinario</option>
            <option value="CUIDADOR">Cuidador</option>
            <option value="PELUQUERO">Peluquero</option>
          </select>

          <label>Descripción:</label>
          <textarea id="editMyDescripcion"></textarea>

          <label>Contraseña (opcional):</label>
          <input type="password" id="editMyPassword" placeholder="••••••••" />

          <div class="modal-actions">
            <button type="submit">Guardar ✅</button>
            <button type="button" onclick="closeProfileModal()">
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>

    <script type="module" src="./controladores/dashboard-sitter.js"></script>
  </body>
</html>
